<form xmlns:th="http://www.thymeleaf.org" data-th-fragment="frag-prof-form(titreForm, action)" class="form-poly"
	method="post" data-th-object="${user}" data-th-action="@{${action}}">

	<h1 data-th-text="${titreForm}"></h1>

	<th:block data-th-if="${!#strings.isEmpty(action)}">
		<div data-th-replace="~{fragments/errors/fragment-errors :: frag-errors}"></div>
	</th:block>

	<!-- Première colonne -->

	<th:block data-th-if="${!#authorization.expression('isAuthenticated()')}">
		<label for="pseudo" data-th-text=#{form.pseudo}></label>
		<input type="text" id="pseudo" required data-th-field="*{pseudo}">
		
		<div data-th-replace="~{fragments/errors/fragment-error :: frag-error('pseudo')}"></div>
	</th:block>

	<th:block data-th-if="${#authorization.expression('isAuthenticated()')}">
		<label for="pseudo" data-th-text=#{form.pseudo}></label>
		<input type="text" id="pseudo" disabled data-th-field="*{pseudo}">
		<div data-th-replace="~{fragments/errors/fragment-error :: frag-error('pseudo')}"></div>
	</th:block>
	
	<input type="hidden" id="pseudoHidden" data-th-field="*{pseudo}">

	<label for="nom" data-th-text=#{form.nom}></label>
	<input type="text" id="nom" data-th-field="*{nom}" required>
	<div data-th-replace="~{fragments/errors/fragment-error :: frag-error('nom')}"></div>
	

	<label for="prenom" data-th-text=#{form.prenom}></label>
	<input type="text" id="prenom" data-th-field="*{prenom}" required>
	<div data-th-replace="~{fragments/errors/fragment-error :: frag-error('prenom')}"></div>

	<label for="telephone" data-th-text=#{form.telephone}></label>
	<input type="text" id="telephone" data-th-field="*{telephone}">
	<!-- ERROR --><div data-th-replace="~{fragments/errors/fragment-error :: frag-error('telephone')}"></div>

	<label for="email" data-th-text=#{form.email}>:</label>
	<input type="text" id="email" data-th-field="*{email}" required>
	<!-- ERROR --><div data-th-replace="~{fragments/errors/fragment-error :: frag-error('email')}"></div>


	<!-- Deuxième colonne -->

	<label for="codePostal" data-th-text=#{form.codePostal}></label>
	<input type="number" id="codePostal" data-th-field="*{adresse.codePostal}" required>
	<!-- ERROR --><div data-th-replace="~{fragments/errors/fragment-error :: frag-error('codePostal')}"></div>

	<label for="rue" data-th-text=#{form.rue}></label>
	<input type="text" id="rue" data-th-field="*{adresse.rue}" required>
	
	<label for="complement" data-th-text=#{form.complement}></label>
	<input type="text" id="complement" name="complement" data-th-field="*{adresse.complement}" required>

	<label for="ville" data-th-text=#{form.ville}></label>
	<input type="text" id="ville" data-th-field="*{adresse.ville}" required>

	<input type="hidden" id="adresseId" data-th-field="*{adresse.id}" />

	<!-- Si je suis sur mon profil, affichage de mon credit -->
	<div class="credit-box" data-th-if="${#authorization.expression('isAuthenticated()')}">
		<p data-th-text="#{form.credit} + ' ' + *{credit}"></p>
	</div>

	<div class="password-box">
		<!-- Gestion de l'affichage des formulaires de mots de passe en fonction de l'authentification -->
		<th:block data-th-if="${!#authorization.expression('isAuthenticated()')}">
			<label for="motDePasse" data-th-text=#{form.mdpNewUser}></label>
			<input type="password" id="motDePasse" data-th-field="*{motDePasse}" required>
		</th:block>

		<th:block data-th-if="${#authorization.expression('isAuthenticated()')}">
			<label for="motDePasse" data-th-text=#{form.mdpCurrent}></label>
			<input type="password" id="motDePasse" data-th-field="*{motDePasse}" required>
		</th:block>

		<th:block data-th-if="${#authorization.expression('isAuthenticated()')}">
			<label for="motDePasseNew" data-th-text=#{form.newMdp}></label>
			<input type="password" id="motDePasseNew" name="motDePasseNew">
		</th:block>

		<label for="confirmation" data-th-text=#{form.mdpConfirm}></label>
		<input type="password" id="confirmation" name="confirmation" required>
	</div>


	<div class="btn-box">
		<!-- Construire fonction JS pour le ONCLICK  -->
		<th:block data-th-if="${#authorization.expression('isAuthenticated()')}">
			<button type="submit" id="submitButton" data-th-text=#{form.enregistrer}></button>
		</th:block>
		<th:block data-th-if="${!#authorization.expression('isAuthenticated()')}">
			<button type="submit" id="submitButton" data-th-text=#{form.creer}></button>
		</th:block>

		<button type="button">Annuler</button>
	</div>

</form>